"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const api_1 = require("@vtex/api");
const ramda_1 = require("ramda");
const isNpm = dep => dep.startsWith('npm:');
exports.removeNpm = (deps, inValues) => {
    Object.keys(deps).forEach(key => {
        if (isNpm(key)) {
            return delete deps[key];
        }
        if (inValues) {
            deps[key] = deps[key].filter(d => !isNpm(d));
        }
    });
    return deps;
};
const cleanDeps = ramda_1.compose(ramda_1.keys, exports.removeNpm);
exports.getCleanDependencies = async (context) => {
    return (await new api_1.Apps(context).getDependencies().then(cleanDeps));
};
